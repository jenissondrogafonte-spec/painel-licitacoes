<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Consulta Licitações ComprasNet</title>
    <style>body { font-family: Arial; } table { border-collapse: collapse; width: 100%; } th, td { border: 1px solid #ddd; padding: 8px; }</style>
</head>
<body>
    <h1>Consulta de Licitações</h1>
    <form id="form-busca">
        <label>UASG: <input type="number" id="uasg" placeholder="ex: 389144"></label>
        <label>Objeto: <input type="text" id="objeto" placeholder="ex: medicamento"></label>
        <button type="submit">Buscar</button>
    </form>
    <table id="tabela-resultados" style="display:none;">
        <thead><tr><th>Nº Aviso</th><th>Objeto</th><th>UASG</th><th>Data Publicação</th></tr></thead>
        <tbody></tbody>
    </table>
    <script>
        document.getElementById('form-busca').addEventListener('submit', async (e) => {
            e.preventDefault();
            const uasg = document.getElementById('uasg').value;
            const objeto = document.getElementById('objeto').value;
            const params = new URLSearchParams({ uasg, objeto }).toString();
            const url = `http://compras.dados.gov.br/licitacoes/v1/licitacoes.json?${params}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                const tbody = document.querySelector('#tabela-resultados tbody');
                tbody.innerHTML = '';
                data.resultado.forEach(lic => {
                    const row = `<tr><td>${lic.numero_aviso}</td><td>${lic.objeto}</td><td>${lic.uasg}</td><td>${lic.data_publicacao}</td></tr>`;
                    tbody.innerHTML += row;
                });
                document.getElementById('tabela-resultados').style.display = 'table';
            } catch (error) {
                alert('Erro na busca: ' + error);
            }
        });
    </script>
</body>
</html>
