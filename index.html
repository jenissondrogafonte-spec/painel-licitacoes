<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel PNCP - Licita√ß√µes + Vencedores + Totais PE</title>
<style>
* {margin:0;padding:0;box-sizing:border-box}
body {font-family:system-ui,-apple-system,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.container {max-width:1400px;margin:0 auto;background:white;border-radius:25px;padding:40px;box-shadow:0 25px 50px rgba(0,0,0,0.15)}
h1 {color:#1e293b;font-size:2.8em;text-align:center;margin-bottom:30px;font-weight:800;text-shadow:0 2px 10px rgba(0,0,0,0.1)}
.search-card {background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:30px;border-radius:20px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}
label {display:block;margin:20px 0 8px;font-weight:700;color:#374151;font-size:16px}
input,select,button {width:100%;padding:16px;border-radius:12px;border:2px solid #e2e8f0;font-size:16px;margin-bottom:15px;transition:all 0.3s}
input:focus,select:focus {border-color:#3b82f6;outline:none;box-shadow:0 0 0 4px rgba(59,130,246,0.1)}
button {background:linear-gradient(135deg,#10b981,#059669);color:white;border:none;font-weight:800;font-size:18px;cursor:pointer;box-shadow:0 8px 25px rgba(16,185,129,0.3);position:relative;overflow:hidden}
button:hover {transform:translateY(-3px);box-shadow:0 12px 35px rgba(16,185,129,0.4)}
button:active {transform:translateY(-1px)}
.tabs {display:flex;background:#f1f5f9;border-radius:16px;overflow:hidden;margin:30px 0;box-shadow:0 8px 25px rgba(0,0,0,0.1)}
.tab-btn {flex:1;padding:20px;border:none;background:none;cursor:pointer;font-weight:700;font-size:16px;transition:all 0.3s;position:relative}
.tab-btn.active {background:#3b82f6;color:white}
.tab-btn:not(.active):hover {background:#e0e7ff}
.tab-content {display:none;padding:30px;background:#fafbfc;border-radius:0 0 25px 25px;box-shadow:inset 0 2px 10px rgba(0,0,0,0.05)}
.tab-content.active {display:block}
table {width:100%;border-collapse:collapse;border-radius:16px;overflow:hidden;background:white;box-shadow:0 10px 30px rgba(0,0,0,0.1);margin:20px 0}
th {background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:white;padding:20px;font-weight:700;text-align:left;position:sticky;top:0;z-index:10}
td {padding:18px;border-bottom:1px solid #f1f5f9}
tr:nth-child(even) {background:#f8fafc}
tr:hover {background:#eff6ff}
.total-card {background:linear-gradient(135deg,#dcfce7,#bbf7d0);padding:25px;border-radius:16px;margin:25px 0;border-left:6px solid #10b981;text-align:center}
.total-number {font-size:3em;font-weight:800;color:#059669}
.loading {text-align:center;padding:60px;font-size:20px;color:#6b7280;display:none}
.error {background:#fee2e2;border-left:6px solid #ef4444;color:#991b1b;padding:25px;border-radius:16px;margin:25px 0}
.success {background:#d1fae5;border-left:6px solid #10b981;color:#065f46;padding:25px;border-radius:16px;margin:25px 0}
@media (max-width:768px) {body{padding:10px}.tabs{flex-direction:column}.container{padding:20px}}
</style>
</head>
<body>
<div class="container">
<h1>üöÄ Painel PNCP Completo - Licita√ß√µes + Vencedores + Totais</h1>

<div class="search-card">
<h2>üîç Buscar Licita√ß√µes PNCP</h2>
<form id="searchForm">
<label>UASG (SEAD-PE)</label>
<input id="uasgInput" type="number" value="926150">

<label>Data In√≠cio</label>
<input id="dataInicio" type="date" value="2025-01-01">

<label>Data Fim</label>
<input id="dataFim" type="date" value="2026-01-13">

<label>N¬∫ Processo (opcional)</label>
<input id="numeroProcesso" type="text" placeholder="ex: 907552025">

<button type="submit">üîç Buscar Licita√ß√µes</button>
</form>
</div>

<div class="tabs">
<button class="tab-btn active" onclick="showTab('tab-licitacoes')">üìã Licita√ß√µes</button>
<button class="tab-btn" onclick="showTab('tab-vencedores')">üë• Vencedores</button>
<button class="tab-btn" onclick="showTab('tab-totais')">üí∞ Totais Fornecedor</button>
</div>

<div id="tab-licitacoes" class="tab-content active">
<div id="licLoading" class="loading">‚è≥ Buscando licita√ß√µes PNCP...</div>
<div id="licitacoesTable"></div>
</div>

<div id="tab-vencedores" class="tab-content">
<div id="vencedoresLoading" class="loading">‚è≥ Carregando vencedores...</div>
<input id="processoVencedor" placeholder="Digite N¬∫ Processo da lista">
<button onclick="buscarVencedores()">üëÅÔ∏è Ver Vencedores/Itens</button>
<div id="vencedoresTable"></div>
</div>

<div id="tab-totais" class="tab-content">
<div id="totaisLoading" class="loading">‚è≥ Calculando...</div>
<select id="fornecedorSelect"><option>Selecione fornecedor</option></select>
<button onclick="calcularTotaisFornecedor()">üí∞ Total Fornecedor</button>
<div id="totaisTable"></div>
<div id="totalCard" class="total-card" style="display:none">
<div class="total-number" id="totalValor">R$ 0</div>
<div>Total geral fornecedor selecionado</div>
</div>
</div>
</div>

<script>
let dadosLicitacoes = [];
let dadosVencedores = [];

function showTab(tabId) {
document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
document.getElementById(tabId).classList.add('active');
event.target.classList.add('active');
}

document.getElementById('searchForm').addEventListener('submit', async e => {
e.preventDefault();

const uasg = document.getElementById('uasgInput').value;
const numero = document.getElementById('numeroProcesso').value;
const dataInicio
