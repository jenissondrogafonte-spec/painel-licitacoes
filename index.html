<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel LicitaÃ§Ãµes - ComprasNet PE</title>
<style>
body{font-family:Arial,sans-serif;max-width:1200px;margin:0 auto;padding:20px;background:#f8f9fa}
h1{color:#007bff;text-align:center}
form{background:white;padding:25px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);margin-bottom:20px}
label{display:block;margin-bottom:12px;font-weight:bold;color:#333}
input{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;font-size:16px;margin-bottom:10px}
button{background:#28a745;color:white;padding:12px 30px;border:none;border-radius:5px;cursor:pointer;font-size:16px;width:100%;margin-top:10px}
button:hover{background:#218838}
table{border-collapse:collapse;width:100%;background:white;border-radius:10px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,.1);display:none;margin-top:20px}
th{background:#007bff;color:white;padding:15px;text-align:left;font-weight:bold}
td{padding:12px 15px;border-bottom:1px solid #eee}
tr:hover{background:#f8f9fa}
.loading{text-align:center;padding:30px;background:white;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);display:none}
.info{background:#d4edda;padding:15px;border-radius:5px;margin-top:20px;font-size:14px;display:none}
</style>
</head>
<body>
<h1>ğŸ” Painel LicitaÃ§Ãµes ComprasNet - PE/Recife</h1>
<form id="form-busca">
<label>ğŸ†” UASG (926150=SEAD-PE):</label><input type="number" id="uasg" value="926150" placeholder="926150">
<label>ğŸ“ NÂº LicitaÃ§Ã£o:</label><input type="text" id="numero" placeholder="ex: 901402">
<label>ğŸ“… Data InÃ­cio:</label><input type="date" id="data_min" value="2025-01-01">
<label>ğŸ“… Data Fim:</label><input type="date" id="data_max" value="2026-01-13">
<button type="submit">ğŸš€ Buscar</button>
</form>
<div id="loading" class="loading">â³ Carregando...</div>
<div id="info" class="info"></div>
<table id="tabela-resultados"><thead><tr><th>NÂº Aviso</th><th>UASG</th><th>Data</th><th>Modalidade</th><th>Objeto</th></tr></thead><tbody></tbody></table>

<script>
document.getElementById('form-busca').addEventListener('submit',async e=>{e.preventDefault();const uasg=document.getElementById('uasg').value.trim(),numero=document.getElementById('numero').value.trim(),data_min=document.getElementById('data_min').value,data_max=document.getElementById('data_max').value;if(!uasg&&!numero&&!data_min&&!data_max){alert('Informe filtro!');return}const params=new URLSearchParams({limit:'100'});uasg&&params.append('uasg',uasg),numero&&params.append('numero_aviso',numero),data_min&&params.append('data_publicacao_min',data_min),data_max&&params.append('data_publicacao_max',data_max);const apiUrl=`http://compras.dados.gov.br/licitacoes/v1/licitacoes.json?${params}`,proxyUrl=`https://api.allorigins.win/raw?url=${encodeURIComponent(apiUrl)}`,loadingEl=document.getElementById('loading'),tableEl=document.getElementById('tabela-resultados'),infoEl=document.getElementById('info');loadingEl.style.display='block',tableEl.style.display='none',infoEl.style.display='none';try{const res=await fetch(proxyUrl);if(!res.ok)throw new Error('API falhou');const data=await res.json();loadingEl.style.display='none';if(!data.resultado||data.resultado.length===0){infoEl.innerHTML=`âŒ 0 resultados<br>ğŸ”— <a href="${apiUrl}" target="_blank">Teste URL direta</a>`;infoEl.style.display='block';return}infoEl.innerHTML=`âœ… ${data.resultado.length} licitaÃ§Ã£o(Ãµes) encontradas`;infoEl.style.display='block';const tbody=tableEl.querySelector('tbody');tbody.innerHTML='';data.resultado.slice(0,20).forEach(lic=>{const row=document.createElement('tr');row.innerHTML=`<td>${lic.numero_aviso||'-'}</td><td>${lic.uasg||'-'}</td><td>${lic.data_publicacao||'-'}</td><td>${lic.modalidade||'-'}</td><td>${(lic.objeto||'').substring(0,60)||'-'}</td>`;tbody.appendChild(row)});tableEl.style.display='table'}catch(err){loadingEl.style.display='none';infoEl.innerHTML=`âŒ Erro: ${err.message}<br>Teste: UASG 926150 + Data 2025-01-01`;infoEl.style.display='block'}});
</script>
</body>
</html>
