<script>
document.addEventListener('DOMContentLoaded', async () => {
  const status = document.getElementById('status') || document.createElement('div');
  status.id = 'status';
  status.style.color = 'blue';
  status.style.fontWeight = 'bold';
  document.body.appendChild(status);

  try {
    status.textContent = 'üîÑ Testando conex√£o com Compras.gov.br (m√≥dulo 07)...';
    
    // Chama SEM FILTROS ‚Äì s√≥ pagina√ß√£o (deve retornar dados sempre) [web:13]
    const url = 'https://dadosabertos.compras.gov.br/modulo-contratacoes/1_consultarContratacoes_PNCP_14133?pagina=1&tamanhoPagina=5';
    
    const resp = await fetch(url);
    status.textContent = '‚úÖ Fetch OK. Status: ' + resp.status;
    
    const data = await resp.json();
    status.textContent += ' | Registros: ' + (data.resultado?.length || 0);
    
    // Mostra o JSON cru no console (F12)
    console.log('JSON completo:', data);
    
    // Se voc√™ tem tbody, popula com dados b√°sicos
    const tbody = document.getElementById('tbody');
    if (tbody && data.resultado) {
      data.resultado.forEach((item, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${i+1}</td>
          <td>${JSON.stringify(item).substring(0, 100)}...</td>
        `;
        tbody.appendChild(tr);
      });
      status.textContent += ' | Tabela populada com preview.';
    }
    
  } catch (e) {
    status.textContent = '‚ùå Erro: ' + e.message;
    status.style.color = 'red';
    console.error(e);
  }
});
</script>
